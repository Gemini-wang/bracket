!function(){function a(){function b(a,c,e){if(1==arguments.length)e=arguments[0],c=[],a="";else if(2==arguments.length&&"function"==typeof arguments[1])e=arguments[1],"string"==typeof arguments[0]?(a=arguments[0],c=[]):(c=arguments[0],a="");else if(arguments.length<3)throw Error("invalid arguments");return d(e,a,c),b}function c(){for(var a,b=!0;b;)if(b=!1,k=k.filter(function(c){if(f(c.requires)){try{e(c.invoke,c.name),b=!0}catch(d){a=d}return!1}return!0}),a)throw a}function d(a,b,d){if(f(d))e(a,b),c();else{var g={invoke:a,requires:d,name:b};b&&(i[b]=g),k.push(g)}}function e(a,b){var c,d,e={},f={};if(!a){if(!(c=i[b]))throw Error("can not find module:"+b);a=c.invoke}if(b){if(l.indexOf(b)>-1)throw Error("circular dependencies:",l.join("->"));l.push(b)}try{return d=a(g,e,f)||f.exports||e}catch(k){throw d=k}finally{c&&delete i[b],b&&(l.splice(l.indexOf(b),1),j.push(b),h[b]=d)}}function f(a){return a.every(function(a){return j.indexOf(a)>-1})}function g(a){return h[a]||e(null,a)}var h={},i={},j=[],k=[],l=[];return b.define=b,b.require=function(a){return h.hasOwnProperty(a)||i.hasOwnProperty(a)?g(a):void 0},b.newContext=a,b.conflict=function(){console.log(k)},b}window.bracket={define:a()}}(),bracket.define("mvc.binding",["mvc.parser"],function(a){function b(a){return this instanceof b?("string"==typeof a&&(a=d.parse(a)),this.expression=a,void(this.$$actions=[])):new b(a)}var c=a("mvc.util"),d=a("mvc.parser"),e=c.arrAdd;return b.prototype={update:function(a){var b=this.$$currentValue=this.get(a),d=this.$$lastValue;return c.equals(b,d)||c.objEmit(this,"update",[b,d,a],null),this.$$lastValue=this.$$currentValue},get:function(a){return this.expression.get(a)},addAction:function(a,b){return c.objOn(this,"update",a,b),this},merge:function(a){if(a.expression.id!==this.expression.id)throw Error("cannot merge binding of different ids");var b=this.$$actions;return a.$$actions.forEach(function(a){e(b,a)}),this}},b.global=window,b}),bracket.define("mvc.controller",["mvc.binding"],function(a){function b(a){return this instanceof b?(a=a||{},this.$$bingdings={},this.$$parent=a.parent,this.$$children=[],this.$$root=a.root||this,this.$$phrase="valid",this.$this=this,this.$update(),void e(this)):new b(a)}function c(a){return a instanceof g?a.expression:"string"==typeof a?h.parse(a):a}function d(a){a.$$phrase="updating",j(a.$$bingdings,function(b){b.update(a)}),a.$$children.forEach(d),a.$$phrase="valid"}var e,f=a("mvc.util"),g=a("mvc.binding"),h=a("mvc.parser"),i=f.isFunc,j=f.forEach;b.prototype={$on:function(a,b){return f.objOn(this,a,b)},$$get:function(a){return c(a).get(this)},$$set:function(a,b){return this.$update(),c(a).set(this,b)},$upward:function(a,b){var c=this.$$parent;return c&&(f.objEmit(c,a,b),c.$upward(a,b)),this},$broadcast:function(a,b){return this.$$children.forEach(function(c){f.objEmit(c,a,b),c.$broadcast(a,b)}),this},$destroy:function(){var a=this.$$root,b=this.$$parent;"destroyed"!==this.$$phrase&&(b&&(f.arrRemove(b.$$children,this),this.$$parent=null,this.$$phrase="destroyed"),a&&a.$update())},$$new:function(){var a=Object.create(this);return b.call(a,{parent:this,root:this.$$root}),this.$$children.push(a),a},$bind:function(a,b,c){var d,e;return"string"==typeof a&&(a=new g(a)),d=(d=this.$$bingdings[e=a.expression.id])?d.merge(a):this.$$bingdings[e]=a,d.addAction(b,c),this},$update:function(){if("valid"==this.$$phrase){var a;this.$$phrase="invalid",(a=this.$$root)==this?window.requestAnimationFrame(function(){d(a)}):a&&a.$update()}}};var k="$$phrase";return e=i(Object.observe)?function(a){Object.observe(a,function(b){b.some(function(a){return-1==k.indexOf(a.name)})&&a.$update()})}:function(){},b}),bracket.define("mvc.ast",["mvc.util"],function(a,b){function c(a,b){p.inherit(a,d.prototype,b)}function d(){}function e(a){this.thisObj=a}function f(a){this.value=a}function g(a,b){this.params=b?b.slice():[];var c=l(a);this.caller=c.caller,this.callee=c.callee}function h(a){this.propertyNames=a?a instanceof Array?a.slice():[a]:[]}function i(a){this.asts=a?[a]:[]}function j(a,b,c){this.left=a||new e,this.right=c,this.act=r[this.action=b]}function k(a,b,c){this.condition=a,this.assert=b,this.reject=c}function l(a){var b,c,d,g;return a instanceof j&&"."==a.action?(b=a.left,c=(g=a.right)instanceof f?new h(g.value):g):a instanceof h&&(d=a.propertyNames).length>1?(b=new h(d.slice(0,d.length-1)),c=new h(d[d.length-1])):(b=new e,c=a),{caller:b,callee:c}}function m(a,b){for(var c=a,d=0,e=b,f=e[0];void 0!==f&&void 0!==c&&void 0!==(c=c[f]);f=e[++d]);return c}function n(a){var b=a.asts=a.asts.map(function(a){return a.reduce()}).filter(function(a){return a}),c=b.length;return c?1==c?b[0]:a:void 0}function o(a){var b=a.right,c=a.left,d=a,g=a.action;return b instanceof j&&(b=o(b)),c instanceof j&&(c=o(c)),"."==g&&(c instanceof h&&b instanceof f?d=new h(c.propertyNames).addProperty(b.value):c instanceof e&&!c.thisObj&&(b instanceof f?d=new h(b.value):b instanceof h&&(d=new h(b.propertyNames)))),d}var p=a("mvc.util"),q=p.isFunc;d.prototype={get:function(){},reduce:function(){return this},operate:function(a,b){return new j(this,a,b)},set:function(){},type:"ast"},c(k,{type:"alter",get:function(a){return this.condition.get(a)?this.assert.get(a):this.reject.get(a)}}),c(e,{type:"this",get:function(a){return this.thisObj||a}}),c(f,{get:function(){return this.value},toString:function(){return this.value+""},type:"const"}),c(h,{get:function(a){return m(a,this.propertyNames)},addProperty:function(a){return this.propertyNames.push(a),this},operate:function(a,b){return"."==a&&b instanceof f?this.addProperty(b.value):new j(this,a,b)},set:function(a,b){var c,d,e=this.propertyNames;return(d=e.length)&&(c=m(a,e.slice(0,d-1)))?c[e[d-1]]=b:void 0},type:"access"}),c(g,{get:function(a){var b,c=this.caller.get(a);return c&&q(b=this.callee.get(c))?b.apply(c,this.params.map(function(b){return b.get(a)})):void 0},type:"invoke"});var r={"||":function(a,b){return b},"&&":function(a,b){return a&&b},"!=":function(a,b){return a!=b},"!==":function(a,b){return a!==b},"===":function(a,b){return a===b},"==":function(a,b){return a==b},".":function(a,b){return a[b]},">":function(a,b){return a>b},">=":function(a,b){return a>=b},"<":function(a,b){return b>a},"<=":function(a,b){return b>=a}};c(j,{type:"binary",get:function(a){var b=this.left.get(a),c=this.right,d=this.action;return"||"===d&&b?b:"!"==d?!b:(c=c.get(a),this.act(b,c))},act:function(){throw Error("not support operation:"+this.action)},set:function(a,b){var c;return"."===this.action&&(c=this.left.get(a))?c[this.right.get(a)]=b:void 0},reduce:function(){return o(this)}}),c(i,{add:function(a){return(a=a.reduce())&&this.asts.push(a),this},get:function(a){return this.asts.reduce(function(b,c){return c.get(a)},1)},reduce:function(){return n(this)}}),b.Ast=d,b.This=e,b.Binary=j,b.Const=f,b.Invoke=g,b.Access=h,b.Alter=k,b.Statement=i}),bracket.define("mvc.compile",["mvc.register"],function(a,b){function c(a,b){function j(b){var c,e;if(c=b.templateSelector){if(c=document.querySelector(c),!c)throw Error("templateSelector:"+b.templateSelector+" not found matched element");b.template=c.innerHTML,b.templateSelector=null}if(c=b.template)if(b.replace){var f,g=document.createElement("div");if(g.innerHTML=c,1!==g.children.length)throw Error("should be replaced with one element");f=g.children[0],n.push.apply(n,i(f)),a.parentElement.replaceChild(f,a),a=f}else a.innerHTML=c;k=d(b.controller,k)||k,h(e=b.link)&&m.push(e)}var k,l=e.attrMap(a),m=[],n=i(a);return(k=d(l.brController,b)||b)&&(n.forEach(j),m.sort(function(a,b){return b.priority-a.priority}).forEach(function(b){b(k,a,l)}),g(k,a,l)),f.mkArr(a.children).forEach(function(b){c(b,k,a)}),a.$$shouldRemove&&a.parentElement.removeChild(a),{controller:k,element:a,attributes:l}}function d(b,c){var d,e;if(b){if(d=h(b)?b:a(b),!h(d))throw Error("controller must be a function");d.call(e=c.$$new(),e)}return e}var e=a("mvc.dom"),f=a("mvc.util"),g=a("mvc.interpolate").interpolateElement,h=f.isFunc,i=a("mvc.register").collectCompilers;b.compile=c}),bracket.define("mvc.debug",function(a,b,c){var d=!1;c.exports={enable:function(a){return d=a!==!1},stop:function(){},error:function(a){throw a}}}),bracket.define(["mvc.register"],function(a){var b=a("mvc.register").addCompiler;b({name:"br-class",link:function(a,b,c){a.$bind(c.brClass,function(a,c){c&&b.classList.remove(c),a&&b.classList.add(a)})}}),b({name:"br-src",link:function(a,b,c){a.$bind(c.brSrc,function(a){a&&b.setAttribute("src",a)})}}),b({name:"br-show",link:function(a,b,c){a.$bind(c.brShow,function(a){b.style.display=a?"":"none"})}}),b({name:"br-disabled",link:function(a,b,c){a.$bind(c.brDisabled,function(a){a?b.setAttribute("disabled",1):b.removeAttribute("disabled")})}})}),bracket.define(["mvc.register"],function(a){function b(a){return a[0].toUpperCase()+a.slice(1)}function c(a){e({name:"br-"+a,link:function(c,d,e){function g(a){c.$event=a,h.get(c),c.$event=null,c.$update()}try{var h=f(e["br"+b(a)]);d.addEventListener(a,g),d.addEventListener("unload",function(){d.removeEventListener(a,g)})}catch(i){console.error(i)}}})}var d=a("mvc.util"),e=(d.isFunc,a("mvc.register").addCompiler),f=a("mvc.parser").parse;"click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" ").forEach(function(a){c(a,!0)})}),bracket.define(["mvc.register"],function(a){function b(a,b){switch(b){case"number":return+a||"";case"boolean":return!!a;default:return a+""}}var c=a("mvc.binding");a("mvc.register").addCompiler({name:"br-model",link:function(a,d,e){var f,g,h=e.brModel,i=c(h);void 0!==(f=i.get(a))&&(g=typeof(d.value=f)),a.$bind(i,function(b){void 0!==b&&(a[h]=d.value=b)}),d.addEventListener("blur",function(){var c=b(d.value,g);a.$$get(i)!==c&&a.$$set(i,c)})}})}),bracket.define(["mvc.compile"],function(a){function b(a,b){var c,d=a.parentElement;return d.insertBefore(document.createComment("bracket-repeat "+b),a),d.insertBefore(c=document.createComment("bracket-repeat end"),a.nextSibling),c}var c=a("mvc.compile"),d=a("mvc.util"),e=a("mvc.dom");a("mvc.register").addCompiler({name:"br-repeat",priority:1e3,link:function(a,f,g){var h=g.brRepeat,i=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!i)throw Error("repeat exp should like: item in items (track by item.id)");var j=b(f,h),k=f.cloneNode(!0);e.removeAttribute(k,"br-repeat"),f.$$shouldRemove=1;var l=i[2],m=i[1],n=(i[3],{}),o=[];a.$bind(l,function(b){b=d.mkArr(b)||[];var f,g={},h=b.map(function(b,d){if((f=n[d])&&f.model===b)g[d]=e=f,o[d]=void 0;else{var e=c.compile(k.cloneNode(!0),a.$$new()),h=e.controller;h[m]||(h[m]=b),g[h.$index=d]={element:e.element,controller:e.controller,model:b},f&&f.controller.$destroy()}return e.element});n=g,e.insertBefore(j,h,o),o=h})}})}),bracket.define("mvc.dom",["mvc.util"],function(a){function b(a){return a.toLowerCase().replace(/^data\-/,"").replace(/\-[a-z]/g,function(a){return a[1].toUpperCase()})}function c(a,b,c){var d,e,f=a.parentElement,g=a;for(d=b.length-1;d>=0;d--)f.contains(e=b[d])||f.insertBefore(e,g),g=e;c&&c.forEach(function(a){a&&f.removeChild(a)})}function d(a){return h.arrReduce(a.attributes,function(a,c){return a[b(c.name)]=c.value,a},{})}function e(a,b){return h.mkArr((b||document).querySelectorAll(a))}function f(a){return[a,"data-"+a]}function g(a,b,c){for(var d,e=f(b),g=0,h=c?e.length:1;h>g;g++)if(null!==(d=a.getAttribute(e[g])))return d;return null}var h=a("mvc.util"),i=Node.TEXT_NODE;return{$:e,getAttr:g,removeAttribute:function(a,b){f(b).some(function(b){return a.hasAttribute(b)?(a.removeAttribute(b),!0):void 0})},attrMap:d,normalize:b,insertBefore:c,textNodes:function(a){return h.arrFilter(a.childNodes,function(a){return a.nodeType===i})}}}),bracket.define("mvc.interpolate",["mvc.controller","mvc.dom"],function(a,b){function c(a){var b={};return a.replace(g,function(a,c,d){b[a]={once:!!c,expression:d}}),b}var d=a("mvc.binding"),e=a("mvc.util").forEach,f=a("mvc.dom").textNodes,g=/\{\{(::)?(.*?)\}\}/g;b.getBinding=function(a){var b,c=a;return a.replace(g,function(a,d){b=c=d}),d(c)},b.interpolateElement=function(a,b,d){function h(b,d){var f=b[d];g.test(f)&&e(c(f),function(c,e){a.$bind(c.expression,function(a){void 0!==a&&(b[d]=f.split(e).join(a))},c.once)})}var i=Object.getOwnPropertyNames(d).map(function(a){return d[a]});e(b.attributes,function(a){-1==i.indexOf(a)&&h(a,"value")}),f(b).forEach(function(a){h(a,"textContent")})}}),bracket.define("bracket.mvc",["mvc.compile","mvc.dom"],function(a){function b(a,b){if(h.isFunc(b)||(b=f),p){var e=p[a]||(p[a]=[]);i(e,b)}else{var q,r=g.$('*[br-app="!"]'.replace("!",a))[0];r?(c(a,{require:j(r,"bracket-require",1)}),q=o[a].require,g.$("*[br-controller]",r).forEach(function(a){d(q,j(a,"br-controller"))}),n(r,q),l(q.slice(),function(){var a=k(r,new m);h.isFunc(b)&&b(a)})):console.warn("element with br-app="+a+" not found")}}function c(a,b){var c=e(a);return c&&b&&d(c.require,b.require),c}function d(a,b){return a&&("string"==typeof b&&(b=b.split(/\b\s+\b/).map(function(a){return a.trim()})),b instanceof Array&&b.forEach(function(b){i(a,b)})),a}function e(a){if(a){var b=o[a];return b||(b=o[a]={require:[]}),b}}function f(){}var g=a("mvc.dom"),h=a("mvc.util"),i=h.arrAdd,j=g.getAttr,k=a("mvc.compile").compile,l=bracket.define,m=a("mvc.controller"),n=a("mvc.register").getDependencies,o={},p={};return document.addEventListener("DOMContentLoaded",function(){var a=p;p=null,h.forEach(a,function(a,c){b(c,function(b){a.forEach(function(a){a(b)})})})}),bracket.mvc={init:b,configApp:c}}),bracket.define("mvc.parser",["mvc.ast"],function(a,b){function c(a){switch(a){case"false":return!1;case"true":return!0;case"null":return null;case"undefined":return void 0;default:throw""}}function d(a,b,c,d){this.value=a,this.type=b,this.index=c,this.symbol=d}function e(a){this.currentInput=this.input=a}function f(a,b){function c(){throw Error("parse error in:"+a.substr(f.index-5,5))}function d(a,b){var c=b.length-1;switch(a){case 2:return new g.Const(b[c]);case 3:return new g.Access(b[c]);case 5:return b[c-2].operate(".",new g.Const(b[c]));case 6:return b[c-3].operate(".",b[c-1]);case 7:return b[c].operate("!");case 8:return b[c-2].operate(b[c-1],b[c]);case 9:return new g.Alter(b[c-4],b[c-2],b[c]);case 10:return b[c-1];case 11:return[b[c]];case 12:b[c-2].push(b[c]);break;case 13:return new g.Invoke(b[c-2]);case 14:return new g.Invoke(b[c-3],b[c-1])}}for(var e,f,h,i,j,k,l=new b(a),m=[],n=[0];;)if(e=n[n.length-1],(i=s[e])||(isNaN(j)&&(j=q.indexOf((f=l.lex()).symbol)),i=p[e]&&p[e][j]),i&&i.length&&i[0]||c(f),1==i[0])n.push(j),m.push(f.value),n.push(i[1]),j=0/0;else{if(2!=i[0])return k;h=r[i[1]][1],k=d(i[1],m)||m[m.length-h],h&&(n=n.slice(0,-1*h*2),m=m.slice(0,-1*h)),n.push(r[i[1]][0]),m.push(k),n.push(p[n[n.length-2]][n[n.length-1]])}}var g=a("mvc.ast"),h=(a("mvc.util"),{}),i={CONST:"CONST",PUNC:"OPT",SEP:";",ID:"ID",EOF:"EOF"},j=/^(\[|]|\(|\)|,|!={0,2}|={2,3}|&{1,2}|\?|:|\|{1,2}|\.|<=?|>=?)/,k=/^[\s\t\r\n\f]+/,l=/^(true|false|null|undefined)/,m=/^(\-?(\d*\.\d+|\d+))/,n=/^[a-z_$][a-z0-9_$]*/i,o=/^('|").*?\1/;d.prototype={toString:function(){return this.value+""}},e.prototype={error:function(){throw Error("parse error in:"+this.input.slice(0,this.input.length-this.currentInput.length+1))},getIndex:function(){return this.input.length-this.currentInput.length},lex:function(){function a(a,b){return u.currentInput=t.substr(s.length),new d(b,a,u.getIndex(),a===i.PUNC?-1==q.indexOf(b)?i.PUNC:b:a)}function b(a){return(r=t.match(a))&&(s=r[0])}function e(){return b(l)}function f(){return b(n)}function g(){return b(m)}function h(){return b(o)}function k(){return b(j)}function p(){return";"==t[0]&&";"==s}for(var r,s,t,u=this;!this.end()&&(t=this.skip());){if(e())return a(i.CONST,c(s));if(f())return a(i.ID,s);if(h())return a(i.CONST,s.substr(1,s.length-2));if(g())return a(i.CONST,+s);if(k())return a(i.PUNC,s);if(p())return a(i.SEP,";");this.error()}return this.done?s="$end":this.done=!!(s="EOF"),new d(s,i.EOF,u.getIndex(),s)},end:function(){return 0==this.currentInput.length},skip:function(){return this.currentInput=this.currentInput.replace(k,"")}},b.parse=function(a){var b=h[a=a.trim()];return b||(b=new g.Statement,a.split(/;/g).forEach(function(a){(a=a.trim())&&b.add(f(a,e))}),h[a]=b=b.reduce(),b.id=a),b},b.token=function(a){for(var b=[],c=new e(a);!c.done;)b.push(c.lex());return b};var p,q=["$accept","$end","error","exp","value","EOF","CONST","ID","func",".","[","]","!","OPT","?",":","(",")","params",","],r=[0,[3,2],[4,1],[4,1],[4,1],[4,3],[4,4],[4,2],[4,3],[4,5],[4,3],[18,1],[18,3],[8,3],[8,4]],s={8:[2,1]};!function(){var a=function(a,b,c,d){for(c=c||{},d=a.length;d--;c[a[d]]=b);return c},b=[1,3],c=[1,4],d=[1,6],e=[1,7],f=[1,9],g=[1,10],h=[1,11],i=[1,12],j=[1,13],k=[5,9,10,11,13,14,15,16,17,19],l=[5,11,13,14,15,17,19],m=[17,19];p=[{3:1,4:2,6:b,7:c,8:5,12:d,16:e},{1:[3]},{5:[1,8],9:f,10:g,13:h,14:i,16:j},a(k,[2,2]),a(k,[2,3]),a(k,[2,4]),{4:14,6:b,7:c,8:5,12:d,16:e},{4:15,6:b,7:c,8:5,12:d,16:e},{1:[2,1]},{7:[1,16]},{4:17,6:b,7:c,8:5,12:d,16:e},{4:18,6:b,7:c,8:5,12:d,16:e},{4:19,6:b,7:c,8:5,12:d,16:e},{4:22,6:b,7:c,8:5,12:d,16:e,17:[1,20],18:21},a(l,[2,7],{9:f,10:g,16:j}),{9:f,10:g,13:h,14:i,16:j,17:[1,23]},a(k,[2,5]),{9:f,10:g,11:[1,24],13:h,14:i,16:j},a(l,[2,8],{9:f,10:g,16:j}),{9:f,10:g,13:h,14:i,15:[1,25],16:j},a(k,[2,13]),{17:[1,26],19:[1,27]},a(m,[2,11],{9:f,10:g,13:h,14:i,16:j}),a(k,[2,10]),a(k,[2,6]),{4:28,6:b,7:c,8:5,12:d,16:e},a(k,[2,14]),{4:29,6:b,7:c,8:5,12:d,16:e},a([5,11,14,15,17,19],[2,9],{9:f,10:g,13:h,16:j}),a(m,[2,12],{9:f,10:g,13:h,14:i,16:j})]}()}),bracket.define("mvc.register",["mvc.interpolate"],function(a,b,c){function d(a){var b,c,d=a.link;g.arrInsert(j,b={priority:a.priority||0,name:f(a.name),template:a.template,templateSelector:a.templateSelector,replace:a.replace,controller:c=a.controller,restrict:(a.restrict||"AE").toUpperCase()},"priority",1),h(d)&&(b.link=d,d.priority=b.priority),"string"==typeof c&&(i[c]=e(b.name,b.restrict))}function e(a,b){var c;return c=b.indexOf("A")?k.map(function(b){return"*["+b+a+"]"}):[],b.indexOf("E")>-1&&c.push(a),c}function f(a){return a.replace(/[A-Z]/g,function(a){return"-"+a})}var g=a("mvc.util"),h=g.isFunc,i={},j=[],k=["data-",""];c.exports={addCompiler:d,collectCompilers:function(a){var b=[];return j.forEach(function(c){var d,e=c.restrict,f=c.name;e.indexOf("E")>-1&&a.tagName.toLowerCase()==f&&(d=1),!d&&e.indexOf("A")>-1&&(d=k.some(function(b){return a.hasAttribute(b+f)})),d&&g.arrAdd(b,c)}),b},getDependencies:function(a,b){return b=b||[],g.forEach(i,function(c,d){c.some(function(b){return a.querySelector(b)})&&g.arrAdd(b,d)}),b}}}),bracket.define("mvc.util",["mvc.debug"],function(a,b,c){function d(a,b,c){var d,e=0;if(f(a))if(void 0===c&&(c=a),a instanceof Array)a.forEach(b,c);else if(d=a.length)for(;d>e;e++)b.call(c,a[e],e);else for(var g=Object.getOwnPropertyNames(a),h=g[0];h;h=g[++e])b.call(c,a[h],h);return a}function e(a){return"function"==typeof a}function f(a){return a&&"object"==typeof a}function g(a,b,c,e){"function"==typeof b&&(b=new b),b=b||{};var f,g=a.prototype=Object.create(b);if(c)for(var h in c)f=Object.getOwnPropertyDescriptor(c,h),f?Object.defineProperty(g,h,f):g[h]=c[h];return e&&d(e,function(a,b){Object.defineProperty(g,a,b)}),a}function h(a,b,c){return-1==a.indexOf(b)?(a[c?"unshift":"push"](b),!0):void 0}function i(a,b,c,d){if("string"==typeof b&&b&&e(c)){var f,g;return a.hasOwnProperty("$$callbacks")||(a.$$callbacks={}),f=a.$$callbacks,(g=f[b])||(g=f[b]=[]),h(g,d?l(c):c)}return!1}function j(a,b,c,d){var f,g;return a.hasOwnProperty("$$callbacks")&&(g=(f=a.$$callbacks)[b])?(c?c instanceof Array||(c=[c]):c=[],void 0===d&&(d=a),f[b]=g.reduce(function(a,b){return e(b)&&-1!==b.apply(d,c)&&a.push(b),a},[])):!1}function k(a,b,c){var d,e,f;return void 0===b?a.$$callbacks={}:(d=a.$$callbacks)&&(e=d[b])&&e&&(c?(f=e.indexOf(c))>-1&&(e[f]=null):d[b]=[]),a}function l(a){return function(){return a.apply(this,arguments),-1}}function m(a){var b=typeof a;return"string"===b?function(b){return b[a]}:"function"===b?a:function(a){return a}}function n(a,b,c,d,e){function f(a){return b==c(a)}function g(a){return b===c(a)}return c=m(c),q(a).some(d?f:g,e)}function o(a,b,c){var d,e;return q(a).some(function(a,c){return b(a)?(d=a,e=c,!0):void 0},c)?{index:e,value:d}:void 0}function p(a,b,c,d){function e(a){return h<c(a)}function f(a){return h>c(a)}var g,h=(c=m(c))(b),i=-1;return(g=o(a,d?f:e))?a.splice(i=g.index,0,b):t(a)&&-1!=a.indexOf(b)||(a[i=a.length]=b),i}function q(a){return t(a)?a:s.slice.call(a)}function r(a){return u[a]=u[a]?++u[a]:1}var s=[],t=Array.isArray,u={};c.exports={inherit:g,forEach:d,isObj:f,isFunc:e,arrAdd:h,objOn:i,objOff:k,objEmit:j,arrHas:n,arrInsert:p,arrFirst:o,uid:r,arrRemove:function(a,b,c){var d;do{if(!((d=a.indexOf(b))>-1))break;a.splice(d,1)}while(c)},equals:function(a,b){if(a===b){var c=typeof a;return"string"===c||"number"===c}return!1},empty:function(a){return!!a&&0==Object.getOwnPropertyNames(a).length},mkArr:q},d(Array.prototype,function(a,b){var d;e(a)&&(d="arr"+b[0].toUpperCase()+b.slice(1),c.exports[d]=function(){return a.apply(arguments[0],s.slice.apply(arguments,[1]))})})});